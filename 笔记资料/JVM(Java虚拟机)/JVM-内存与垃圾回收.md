[toc]
# 第一章、JVM与java体系结构
## 前置：java的执行流程
![1](JVM_pic/JVM04.PNG)
![1](JVM_pic/JVM05.PNG)
## 一、JVM的位置
> ![1](JVM_pic/JVM01.PNG)
> ![1](JVM_pic/JVM02.PNG)
## 二、JVM的整体结构
> ![1](JVM_pic/JVM03.PNG)
## 三、JVM的架构模型
> ![1](JVM_pic/JVM06.PNG)
> ![1](JVM_pic/JVM07.PNG)
## 四、JVM的生命周期
> ![1](JVM_pic/JVM08.PNG)
> ![1](JVM_pic/JVM09.PNG)
## 五、JVM的发展历程
> ![1](JVM_pic/JVM10.PNG)
> ![1](JVM_pic/JVM11.PNG)
> ![1](JVM_pic/JVM12.PNG)
>>- #### HotSpot虚拟机
>>> ![1](JVM_pic/JVM13.PNG)
>>>
> ![1](JVM_pic/JVM14.PNG)
> ![1](JVM_pic/JVM15.PNG)
> ![1](JVM_pic/JVM16.PNG)
> ![1](JVM_pic/JVM17.PNG)
> ![1](JVM_pic/JVM18.PNG)
> ![1](JVM_pic/JVM19.PNG)
> ![1](JVM_pic/JVM20.PNG)
> ![1](JVM_pic/JVM21.PNG)
> ![1](JVM_pic/JVM22.PNG)
> ![1](JVM_pic/JVM23.PNG)
---
# 第二章、类加载子系统
> ![1](JVM_pic/JVM24.PNG)
> ![1](JVM_pic/JVM25.PNG)
> ![1](JVM_pic/JVM26.PNG)
## 1.类加载器
>> ![1](JVM_pic/JVM27.PNG)
>> ![1](JVM_pic/JVM28.PNG)
>> ![1](JVM_pic/JVM30.PNG)
>> ![1](JVM_pic/JVM29.PNG)
### (1)Loading
>>> ![1](JVM_pic/JVM31.PNG)
>>> ![1](JVM_pic/JVM32.PNG)
### (2)Linking
>>> ![1](JVM_pic/JVM33.PNG)
### (3)Initialization
>>> ![1](JVM_pic/JVM34.PNG)
>>> ![1](JVM_pic/JVM35.PNG)
## 2.类加载器的分类
>> ![1](JVM_pic/JVM36.PNG)
>> ![1](JVM_pic/JVM37.PNG)
>> ![1](JVM_pic/JVM41.PNG)
>> ![1](JVM_pic/JVM40.PNG)
### (1)引导类加载器(启动类加载器)
>> ![1](JVM_pic/JVM42.PNG)
### (2)拓展类加载器
>> ![1](JVM_pic/JVM43.PNG)
### (3)系统类加载器(应用程序加载器)
>> ![1](JVM_pic/JVM44.PNG)
### (4)自定义类加载器
>> ![1](JVM_pic/JVM45.PNG)
>> ![1](JVM_pic/JVM46.PNG)
### (5)关于ClassLoader
>> ![1](JVM_pic/JVM47.PNG)
>> ![1](JVM_pic/JVM48.PNG)
## 3.双亲委派机制
>> ![1](JVM_pic/JVM49.PNG)
### (1)工作原理
>>> ![1](JVM_pic/JVM50.PNG)
#### 举例
>>>> ![1](JVM_pic/JVM51.PNG)
### (2)优势
>>> ![1](JVM_pic/JVM52.PNG)
### (3)沙箱安全机制
>>> ![1](JVM_pic/JVM53.PNG)
## 4.其他
>>> ![1](JVM_pic/JVM54.PNG)
>>> ![1](JVM_pic/JVM55.PNG)
>>> ![1](JVM_pic/JVM56.PNG)
---
# 三、运行时数据区
## 1.概述
>> ![1](JVM_pic/JVM57.PNG)
>> ![1](JVM_pic/JVM58.PNG)
>> ![1](JVM_pic/JVM59.PNG)
>> ![1](JVM_pic/JVM60.PNG)
>> ![1](JVM_pic/JVM61.PNG)
## 2.线程
>> ![1](JVM_pic/JVM62.PNG)
>> ![1](JVM_pic/JVM63.PNG)
## 3.运行时数据区的组成部分
### (1)程序计数器(PC寄存器):既没有GC，也没有OOM(溢出)
>>> ![1](JVM_pic/JVM64.PNG)
>>> ![1](JVM_pic/JVM65.PNG)
>>> ![1](JVM_pic/JVM66.PNG)
>>> ![1](JVM_pic/JVM67.PNG)
>>> ![1](JVM_pic/JVM68.PNG)
>>> ![1](JVM_pic/JVM69.PNG)
>>> ![1](JVM_pic/JVM70.PNG)
>>> ![1](JVM_pic/JVM71.PNG)
### (2)虚拟机栈:没有GC，存在OOM(溢出)
#### 概述
>>>> ![1](JVM_pic/JVM72.PNG)
>>>> ![1](JVM_pic/JVM73.PNG)
>>>> ![1](JVM_pic/JVM74.PNG)
>>>> ![1](JVM_pic/JVM75.PNG)
##### 基本内容
>>>>> ![1](JVM_pic/JVM76.PNG)
>>>>> ![1](JVM_pic/JVM77.PNG)
>>>>> ![1](JVM_pic/JVM78.PNG)
#### 栈的存储单位
>>>> ![1](JVM_pic/JVM79.PNG)
>>>> ![1](JVM_pic/JVM80.PNG)
>>>> ![1](JVM_pic/JVM81.PNG)
##### 栈桢
>>>>> ![1](JVM_pic/JVM82.PNG)
###### 局部变量表
>>>>>> ![1](JVM_pic/JVM83.PNG)
>>>>>> ![1](JVM_pic/JVM84.PNG)
>>>>>> ![1](JVM_pic/JVM86.PNG)
>>>>>> ![1](JVM_pic/JVM87.PNG)
>>>>>> ![1](JVM_pic/JVM88.PNG)
>>>>>> ![1](JVM_pic/JVM89.PNG)
>>>>>> ![1](JVM_pic/JVM90.PNG)
###### 操作数栈
>>>>>> ![1](JVM_pic/JVM91.PNG)
>>>>>> ![1](JVM_pic/JVM92.PNG)
>>>>>> ![1](JVM_pic/JVM93.PNG)
>>>>>> ![1](JVM_pic/JVM94.PNG)
>>>>>> ![1](JVM_pic/JVM95.PNG)
>>>>>> ![1](JVM_pic/JVM96.PNG)
>>>>>> ![1](JVM_pic/JVM97.PNG)
>>>>>> 栈顶缓存技术
>>>>>>> ![1](JVM_pic/JVM98.PNG)
###### 动态链接
>>>>>> ![1](JVM_pic/JVM99.PNG)
>>>>>> ![1](JVM_pic/JVM100.PNG)
>>>>>> 方法的调用
>>>>>>> ![1](JVM_pic/JVM101.PNG)
>>>>>>> ![1](JVM_pic/JVM102.PNG)
>>>>>>> ![1](JVM_pic/JVM103.PNG)
>>>>>>> ![1](JVM_pic/JVM104.PNG)
>>>>>>> ![1](JVM_pic/JVM105.PNG)
>>>>>>> ![1](JVM_pic/JVM106.PNG)
>>>>>>> ![1](JVM_pic/JVM107.PNG)
>>>>>>> ![1](JVM_pic/JVM108.PNG)
>>>>>>> ![1](JVM_pic/JVM109.PNG)
>>>>>>> ![1](JVM_pic/JVM110.PNG)
###### 方法返回地址
>>>>>> ![1](JVM_pic/JVM111.PNG)
>>>>>> ![1](JVM_pic/JVM112.PNG)
>>>>>> ![1](JVM_pic/JVM113.PNG)
>>>>>> ![1](JVM_pic/JVM114.PNG)
###### 一些附加信息
>>>>>> ![1](JVM_pic/JVM115.PNG)
#### 栈的相关面试题
>>>> ![1](JVM_pic/JVM116.PNG)
>>>> ![1](JVM_pic/JVM117.PNG)
### (3)本地方法栈
#### 概述
>>>> ![1](JVM_pic/JVM124.PNG)
>>>> ![1](JVM_pic/JVM125.PNG)
>>>> ![1](JVM_pic/JVM126.PNG)
### (4)堆
#### 概述
>>>> ![1](JVM_pic/JVM127.PNG)
>>>> ![1](JVM_pic/JVM128.PNG)
>>>> ![1](JVM_pic/JVM129.PNG)
>>>> ![1](JVM_pic/JVM130.PNG)
>>>> ![1](JVM_pic/JVM131.PNG)
>>>> ![1](JVM_pic/JVM132.PNG)
#### 设置堆内存大小与OOM
>>>> ![1](JVM_pic/JVM133.PNG)
>>>> ![1](JVM_pic/JVM134.PNG)
>>>> ![1](JVM_pic/JVM135.PNG)
#### 年轻代与老年代
>>>> ![1](JVM_pic/JVM136.PNG)
>>>> ![1](JVM_pic/JVM137.PNG)
>>>> ![1](JVM_pic/JVM138.PNG)
>>>> ![1](JVM_pic/JVM139.PNG)
>>>> ![1](JVM_pic/JVM140.PNG)
#### 图解对象的分配过程
>>>> ![1](JVM_pic/JVM141.PNG)
>>>> ![1](JVM_pic/JVM142.PNG)
>>>> ![1](JVM_pic/JVM143.PNG)
>>>> ![1](JVM_pic/JVM144.PNG)
>>>> ![1](JVM_pic/JVM145.PNG)
>>>> ![1](JVM_pic/JVM146.PNG)
>>>> ![1](JVM_pic/JVM147.PNG)
#### Minor GC、Major GC、Full GC
>>>> ![1](JVM_pic/JVM149.PNG)
>>>> ![1](JVM_pic/JVM150.PNG)
>>>> ![1](JVM_pic/JVM151.PNG)
>>>> ![1](JVM_pic/JVM152.PNG)
>>>> ![1](JVM_pic/JVM153.PNG)
#### 堆空间分代思想
>>>> ![1](JVM_pic/JVM154.PNG)
>>>> ![1](JVM_pic/JVM155.PNG)
#### 内存分配策略
>>>> ![1](JVM_pic/JVM156.PNG)
>>>> ![1](JVM_pic/JVM157.PNG)
#### 为对象分配内存：TLAB
>>>> ![1](JVM_pic/JVM158.PNG)
>>>> ![1](JVM_pic/JVM159.PNG)
>>>> ![1](JVM_pic/JVM160.PNG)
>>>> ![1](JVM_pic/JVM161.PNG)
>>>> ![1](JVM_pic/JVM162.PNG)
#### 小结堆空间的参数设置
>>>> ![1](JVM_pic/JVM163.PNG)
>>>> ![1](JVM_pic/JVM164.PNG)
>>>> ![1](JVM_pic/JVM165.PNG)
#### 堆是分配对象的唯一选择吗(逃逸分析)
>>>> ![1](JVM_pic/JVM166.PNG)
>>>> ![1](JVM_pic/JVM167.PNG)
>>>> ![1](JVM_pic/JVM168.PNG)
>>>> ![1](JVM_pic/JVM169.PNG)
>>>> ![1](JVM_pic/JVM170.PNG)
>>>> ![1](JVM_pic/JVM171.PNG)
>>>> ![1](JVM_pic/JVM172.PNG)
>>>> ![1](JVM_pic/JVM173.PNG)
>>>> ![1](JVM_pic/JVM174.PNG)
>>>> ![1](JVM_pic/JVM175.PNG)
>>>> ![1](JVM_pic/JVM176.PNG)
>>>> ![1](JVM_pic/JVM177.PNG)
#### 本章小节
>>>> ![1](JVM_pic/JVM178.PNG)
### (5)方法区
>>> ![1](JVM_pic/JVM179.PNG)
#### 栈、堆、方法区的交互关系
>>>> ![1](JVM_pic/JVM180.PNG)
#### 方法区的理解
>>>> ![1](JVM_pic/JVM181.PNG)
>>>> ![1](JVM_pic/JVM182.PNG)
>>>> ![1](JVM_pic/JVM183.PNG)
>>>> ![1](JVM_pic/JVM184.PNG)
>>>> ![1](JVM_pic/JVM185.PNG)
>>>> ![1](JVM_pic/JVM186.PNG)
#### 设置方法区大小与OOM
>>>> ![1](JVM_pic/JVM187.PNG)
>>>> ![1](JVM_pic/JVM188.PNG)
>>>> ![1](JVM_pic/JVM189.PNG)
#### 方法区的内部结构
>>>> ![1](JVM_pic/JVM190.PNG)
>>>> ![1](JVM_pic/JVM191.PNG)
>>>> ![1](JVM_pic/JVM192.PNG)
>>>> ![1](JVM_pic/JVM193.PNG)
>>>> ![1](JVM_pic/JVM194.PNG)
>>>> ![1](JVM_pic/JVM195.PNG)
>>>> ![1](JVM_pic/JVM196.PNG)
>>>> ![1](JVM_pic/JVM197.PNG)
>>>> ![1](JVM_pic/JVM198.PNG)
>>>> ![1](JVM_pic/JVM199.PNG)
>>>> ![1](JVM_pic/JVM200.PNG)
>>>> ![1](JVM_pic/JVM201.PNG)
>>>> ![1](JVM_pic/JVM202.PNG)
#### 方法区使用举例
#### 方法区的演进细节
>>>> ![1](JVM_pic/JVM203.PNG)
>>>> ![1](JVM_pic/JVM204.PNG)
>>>> ![1](JVM_pic/JVM205.PNG)
>>>> ![1](JVM_pic/JVM206.PNG)
>>>> ![1](JVM_pic/JVM207.PNG)
>>>> ![1](JVM_pic/JVM208.PNG)
>>>> ![1](JVM_pic/JVM209.PNG)
#### 方法区的垃圾回收
>>>> ![1](JVM_pic/JVM210.PNG)
>>>> ![1](JVM_pic/JVM211.PNG)
>>>> ![1](JVM_pic/JVM212.PNG)
## 4.总结
>> ![1](JVM_pic/JVM213.PNG)
## 5.面试题
>> ![1](JVM_pic/JVM214.PNG)
>> ![1](JVM_pic/JVM215.PNG)
---
# 四、本地方法库和本地方法接口
> ![1](JVM_pic/JVM118.PNG)
## 概述
### 什么是本地方法
>>> ![1](JVM_pic/JVM119.PNG)
>>> ![1](JVM_pic/JVM120.PNG)
### 为什么要使用Native Method
>>> ![1](JVM_pic/JVM121.PNG)
>>> ![1](JVM_pic/JVM122.PNG)
### 现状
>>> ![1](JVM_pic/JVM123.PNG)
# 五、执行引擎
## 概述
>> ![1](JVM_pic/JVM241.PNG)
>> ![1](JVM_pic/JVM242.PNG)
>> ![1](JVM_pic/JVM243.PNG)
## Java代码编译和执行过程
>> ![1](JVM_pic/JVM244.PNG)
>> ![1](JVM_pic/JVM245.PNG)
>> ![1](JVM_pic/JVM246.PNG)
>> ![1](JVM_pic/JVM247.PNG)
>> ![1](JVM_pic/JVM248.PNG)
>> ![1](JVM_pic/JVM249.PNG)
>> ![1](JVM_pic/JVM250.PNG)
## 机器码、指令、汇编语言
>> ![1](JVM_pic/JVM251.PNG)
>> ![1](JVM_pic/JVM252.PNG)
>> ![1](JVM_pic/JVM253.PNG)
>> ![1](JVM_pic/JVM254.PNG)
>> ![1](JVM_pic/JVM255.PNG)
## 解释器
>> ![1](JVM_pic/JVM256.PNG)
>> ![1](JVM_pic/JVM257.PNG)
>> ![1](JVM_pic/JVM258.PNG)
>> ![1](JVM_pic/JVM259.PNG)
## JIT编译器
>> ![1](JVM_pic/JVM260.PNG)
>> ![1](JVM_pic/JVM261.PNG)
>> ![1](JVM_pic/JVM262.PNG)
>> ![1](JVM_pic/JVM263.PNG)
>> ![1](JVM_pic/JVM264.PNG)
>> ![1](JVM_pic/JVM265.PNG)
>> ![1](JVM_pic/JVM266.PNG)
>> ![1](JVM_pic/JVM267.PNG)
>> ![1](JVM_pic/JVM268.PNG)
>> ![1](JVM_pic/JVM269.PNG)
>> ![1](JVM_pic/JVM270.PNG)
>> ![1](JVM_pic/JVM271.PNG)
>> ![1](JVM_pic/JVM272.PNG)
>> ![1](JVM_pic/JVM274.PNG)
>> ![1](JVM_pic/JVM275.PNG)
>> ![1](JVM_pic/JVM276.PNG)
>> ![1](JVM_pic/JVM277.PNG)
>> ![1](JVM_pic/JVM278.PNG)
## 关于解释器和JIT编译器的设置
>> ![1](JVM_pic/JVM273.PNG)
# 插入内容1、对象的实例化内存布局与访问定位
## 对象的实例化
>> ![1](JVM_pic/JVM216.PNG)
>> ![1](JVM_pic/JVM217.PNG)
>> ![1](JVM_pic/JVM218.PNG)
>> ![1](JVM_pic/JVM219.PNG)
### 六个步骤
>>> ![1](JVM_pic/JVM220.PNG)
>>> ![1](JVM_pic/JVM221.PNG)
>>> ![1](JVM_pic/JVM222.PNG)
>>> ![1](JVM_pic/JVM223.PNG)
>>> ![1](JVM_pic/JVM224.PNG)
>>> ![1](JVM_pic/JVM225.PNG)
>>> ![1](JVM_pic/JVM226.PNG)
>>> ![1](JVM_pic/JVM227.PNG)
## 对象的内存布局
>> ![1](JVM_pic/JVM228.PNG)
>> ![1](JVM_pic/JVM230.PNG)
### 面试题
>>> ![1](JVM_pic/JVM229.PNG)
## 对象的访问定位
>> ![1](JVM_pic/JVM231.PNG)
>> ![1](JVM_pic/JVM232.PNG)
### 对象主要的访问方式
#### 句柄访问
>>>> ![1](JVM_pic/JVM233.PNG)
>>>> ![1](JVM_pic/JVM235.PNG)
#### 直接指针(HotSpot采用)
>>>> ![1](JVM_pic/JVM234.PNG)
# 插入内容2、直接内存
> ![1](JVM_pic/JVM236.PNG)
> ![1](JVM_pic/JVM237.PNG)
> ![1](JVM_pic/JVM238.PNG)
> ![1](JVM_pic/JVM239.PNG)
> ![1](JVM_pic/JVM240.PNG)
# 插入内容3、StringTable
## String的基本特性
>> ![1](JVM_pic/JVM279.PNG)
>> ![1](JVM_pic/JVM280.PNG)
>> ![1](JVM_pic/JVM281.PNG)
>> ![1](JVM_pic/JVM282.PNG)
>> ![1](JVM_pic/JVM283.PNG)
## String的内存分配
>> ![1](JVM_pic/JVM284.PNG)
>> ![1](JVM_pic/JVM285.PNG)
>> ![1](JVM_pic/JVM286.PNG)
## String的基本特性
>> ![1](JVM_pic/JVM287.PNG)
## 字符串拼接操作
>> ![1](JVM_pic/JVM288.PNG)
>> ![1](JVM_pic/JVM289.PNG)
>> ![1](JVM_pic/JVM290.PNG)
>> ![1](JVM_pic/JVM291.PNG)
>> ![1](JVM_pic/JVM292.PNG)
>> ![1](JVM_pic/JVM293.PNG)
>> ![1](JVM_pic/JVM294.PNG)
>> ![1](JVM_pic/JVM295.PNG)
>> ![1](JVM_pic/JVM296.PNG)
>> ![1](JVM_pic/JVM297.PNG)
>> ![1](JVM_pic/JVM298.PNG)
>> ![1](JVM_pic/JVM299.PNG)
## intern()的使用
## StringTable的垃圾回收
## G1中的String去重操作